---
title: "Refactoring 1장"
category: "Etc"
date: "2022-06-06 12:54:00 +09:00"
desc: "리팩터링: 첫 번째 예시"
thumbnail: "./images/refactoring/refactoring_book.jpg"
alt: "리팩터링"
---
![refa](https://user-images.githubusercontent.com/85836879/172093645-3f2f7f9f-b9bc-4723-88f6-dd81dfddd498.jpeg)

## 리팩터링 책을 선택한 이유
앞선 클린코드 책을 읽으며 마지막에 로버트 C 마틴이 언급하는 코드의 냄새와 냄새맡기 장인이라는 마틴 파울러를 보고 마침 깊은 수준까지 알고싶은 언어인 자바스크립트로 개정된 책이 있다는 걸 알고 이책이다! 싶어서 선택하였다. 이 책을 읽으며 마틴 파울러와 로버트 C 마틴이 언급하는 코드 냄새를 알아보고 내 코드에 적용하고 싶어서도 한 몫한 것 같다.

---
### 이 책을 읽어야 하는 사람
이 책의 주 대상은 리펙터링을 배우려는 개발자와 이미 리펙터링을 이해하고 있는 개발자에게도 읽으면 좋은 책이다.

이 책을 읽음으로써 교육용 자료로 활용할 수 있고 숙련된 개발자가 동료들에게 멘토링을 할 수 있는 다양한 리펙터링의 작동 원리를 제공한다.

---
> 마틴 파울러 (Martin Fowler, 1963년 12월 18일 ~)
![Webysther_20150414193208_-_Martin_Fowler](https://user-images.githubusercontent.com/85836879/172094236-093fa532-4324-41b3-b82c-707f98dfaa48.jpeg)

### 들어가며
리펙터링이란 겉으로 드러나는 코드의 기능은 바꾸지 않으면서 내부 구조를 개선하는 방식으로 소프트웨어 시스템을 수정하는 과정이다.

버그가 생길 가능성을 최소로 줄이면서 코드를 정리하는 정제된 방법이며 리펙터링한다는 것은 코드를 작성하고 난 뒤에 설계를 개선하는 일이다.

좋은 설계후에 코드를 작성하지만 시간이 흐르면서 코드는 수정되고 시스템의 무결성, 즉 설계에 맞춘 구조는 점차 엉켜지며 공학에 가깝던 코드는 서서히 해킹에 가까워진다.

이 과정을 반대로 한 것이 리펙터링이다.

이 책을 읽으며 리펙터링이란 무엇인지 어떻게 재설계와 코드 수정을 통해 설계의 체계를 바로잡는지를 배울 수 있다.

리펙터링 2판은 예시코드가 자바스크립트로 되어있어 자바 개발을 하거나 준비하는 개발자는 1판을 추천한다.

---
### 1장 리팩터링: 첫 번째 예시
저자는 리팩터링의 역사와 여러 원칙을 하나씩 나열하며 설명하는건 지루하고 졸린 과정이라고 한다.

저자가 선보이는 일반화된 원칙이 아닌 실제 적용하는 방법을 파악하고 리팩터링 과정을 따라오면서 어떻게 수행하는지 감 잡는 방법을 전해준다.

초판에서 100쪽이 넘는 코드를 글로 작성했지만 그냥 빼버렸다.

이 책에서 나오는 길이가 비교적 짧은 예제들은 대규모 시스템에서 발췌한 코드라고 생각하면서 따라오기를 바란다.

---
### 목차
1-1. 자, 시작해보자!

1-2. 예시 프로그램을 본 소감

1-3. 리팩터링의 첫 단계

1-4. statement() 함수 쪼개기

1-5. 중간 점검: 난무하는 중첩 함수

1-6. 계산 단계와 포맷팅 단계 분리하기

1-7. 중간 점검: 두 파일(과 두 단계)로 분리됨

1-8. 다형성을 활용해 계산 코드 재구성하기

1-9. 상태 점검: 다형성을 활용하여 데이터 생성하기

1-10. 마치며

---

### 1-1. 자, 시작해보자!
다양한 연극을 외주로 받아서 공연하는 극단이 있다고 생각해보자.

공연 요청이 들어오면 연극의 장르와 관객 규모를 기초로 비용을 책정한다.

이 극단은 두 가지 장르로 비극(tragedy)과 희극(comedy)만 공연한다.

그리고 공연료와 별개로 포인트(volume credit)를 지급해서 다음번 의뢰 시 공연료를 할인받을 수도 있다.

극단은 공연할 연극 정보를 다음과 같이 간단한 JSON 파일에 저장한다.

```json
{
    "hamlet" : {"name" : "Hamlet", "type" : "tragedy"},
    "as-like" : {"name" : "As You Like It", "type" : "comedy"},
    "othello" : {"name" : "Othello", "type" : "tragedy"},
}
```

공연료 청구서에 들어갈 데이터도 다음과 같이 JSON 파일로 저장한다.

```json
[
    {
        "customer" : "BigCo",
    }
]
```


